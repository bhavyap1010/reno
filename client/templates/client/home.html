{% extends 'client/base.html' %}

{% block content %}
    <h1>Dashboard</h1>

    <form class="search" action="{% url 'home' %}" method="get">
        <input type="text" name="q">
        <button type="submit">Search</button>
    </form>

    <form action="{% url 'logout-user' %}" method="post">
        {% csrf_token %}
        <button type="submit">Logout</button>
    </form>

    {% if user.profile.account_type == 'business' %}
    <form action="{% url 'business-profile' %}" method="get">
        <button type="submit">Create Business Listing</button>
    </form>
    {% endif %}

    <form action="{% url 'request-service' %}" method="get">
        <button type="submit">Request a Service</button>
    </form>

    <h2>Businesses</h2>
    <ul>
        {% for business in businesses %}
        <li>
            <strong>{{ business.name }}</strong><br>
            Services: {{ business.services }}<br>
            Location: {{ business.service_location }}<br>
            <a href="{% url 'write-review' business.id %}">Review</a>
        </li>
        {% empty %}
        <li>No businesses available.</li>
        {% endfor %}
    </ul>

    <h2>Service Requests</h2>
    <ul>
        {% for request in service_requests %}
        <li>
            <strong>{{ request.title }}</strong><br>
            Needed Services: {{ request.services_needed }}<br>
            Location: {{ request.location }}<br>
            Description: {{ request.description }}
        </li>
        {% empty %}
        <li>No service requests found.</li>
        {% endfor %}
    </ul>
{% endblock %}
